<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  


  <title>Document</title>
  <link rel="stylesheet" href="./css/wallet.css">

  
</head>

<body>

  <header>
    <span>Your Wallet : </span>
    <label id="accountArea" for=""></label>
    <!-- <button onclick="disconnectMetamask()" >disconnect Metamask</button>
    <script src="../js/disconnectMetamask.js"></script> -->
  </header>
  <div class="task-view">
    <div>
      <button  onclick="connectContract()">CONNECT TO CONTRACT</button> <br>
      <p id="contractArea"></p>
    </div>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.7-rc.0/web3.min.js"></script>
   
    <script src="./js/connectContract.js"></script>
    <script>

      let account;
      const connectMetamask = async () => {
          if(window.ethereum !== "undefined") {
              const accounts = await ethereum.request({method: "eth_requestAccounts"});
              account = accounts[0];
              document.getElementById("accountArea").innerHTML = account;
          }
      }
      // Ensure that Web3 is defined before calling connectContract
      if (typeof window.web3 === 'undefined') {
          throw new Error('Web3 is not defined. Make sure the Web3 library is loaded.');
      }

      // Ensure that connectContract is called after Web3 is defined
      window.addEventListener('DOMContentLoaded', (event) => {
          connectContract();
      });
  </script>
    <script>
      // Function to create a new drug



      function showForm() {
        var addForm = document.getElementById("addForm");
        addForm.style.display = "block";

      }

      function toggleSubMenu() {
        var menu = document.getElementById("menu");
        menu.classList.toggle("showSubMenu");
      }
    </script>

    <title>Unlimited Mediciné</title>

    <div id="menu">
      <a href="hsb.html" onclick="toggleSubMenu()">Show</a>
      <div id="subMenu">
        <a href="#">Get All</a>
        <a href="#">Get by ID</a>
      </div>
      <a href="#" onclick="showForm()">Add</a>
    </div>


    <!-- Your contract data display goes here -->
  </div>
  <div id="content">

    <h1 class="rainbow-hover">UM</h1>
    <div id="addForm">

      <form>
        <label for="name">Name:</label>
        <input type="text" id="name" placeholder="Tên thuốc..." required><br>

        <label for="classification">Classification:</label>
        <input type="text" id="classification" placeholder="Phân loại..." required><br>

        <label for="expirationDate">Expiration Date:</label>
        <input type="text" id="expirationDate" placeholder="Hạn sử dụng..." required><br>

        <label for="productionDate">Production Date:</label>
        <input type="text" id="productionDate" placeholder="Ngày sản xuất..." required><br>

        <label for="quantity">Quantity:</label>
        <input type="text" id="quantity" placeholder="số lượng..." required><br>

        <label for="location">Location:</label>
        <input type="text" id="location" placeholder="Vị trí..." required><br>

        <label for="batchNumber">Batch Number:</label>
        <input type="text" id="batchNumber" placeholder="Mã lô..." required><br>

        <label for="ingredients">Ingredients:</label>
        <input type="text" id="ingredients" placeholder="Thành phần..." required><br>

        <label for="status">Status:</label>
        <input type="checkbox" placeholder="true or false" id="status"><br>
      </form>
      <button class="accept-show" id="createDrug" type="button" onclick="createDrug()">Create Drug</button>
      <button class="accept-show"id="redirectToShowDrug" type="button" onclick="redirectToShowDrug()">Show Drugs</button>
    </div>
  </div>
  <script src="../js/connectContract.js"></script>
  <script src="../js/createDrug.js"></script>
  <script>
      // Ensure that Web3 is defined before calling connectContract
      if (typeof window.web3 === 'undefined') {
          throw new Error('Web3 is not defined. Make sure the Web3 library is loaded.');
      }

      // Ensure that connectContract is called after Web3 is defined
      window.addEventListener('DOMContentLoaded', (event) => {
          connectContract();
      });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Lấy dữ liệu từ localStorage
      var accountInfo = localStorage.getItem('connectedAccount');

      // Kiểm tra xem có dữ liệu hay không
      if (accountInfo) {
        // Đặt nội dung vào thẻ <p>
        document.getElementById('accountArea').innerHTML = accountInfo;
      }
    });
  </script>

</body>

</html>